---
import { Image } from 'astro:assets';
import cvData from '@data/cv.json';

// We need to map the images since dynamic imports in Astro are tricky with JSON data
// Ideally these images should probably be moved to public/assets if we want to avoid this mapping
// but for now we'll stick to the existing pattern
import matlabCert from '@assets/img/matlab-onramp.PNG';
import vectorCert from '@assets/img/calculations-with-vectors-and-matrices.PNG';

const certImageMap: Record<string, ImageMetadata> = {
  '/assets/img/matlab-onramp.PNG': matlabCert,
  '/assets/img/calculations-with-vectors-and-matrices.PNG': vectorCert
};

// Simple Fallback interface if the JSON type isn't globally available
interface Certification {
  name: string;
  url: string;
  image: string;
  description: string;
  displayName?: string;
}

const certifications = (cvData.certifications || []) as Certification[];

---

<div class="cert-grid">
  {certifications.map(cert => (
    <div class="cert">
      <a href={cert.url} target="_blank" rel="noopener">
        {certImageMap[cert.image] && (
            <Image src={certImageMap[cert.image]} alt={`${cert.name} certifikat`} class="cert-img" />
        )}
      </a>
      <h3 class="text-sm font-bold mt-2 mb-1">
        <a href={cert.url} target="_blank" rel="noopener" class="no-underline text-white hover:text-accent">
          {cert.displayName || cert.name}
        </a>
      </h3>
      <p class="text-xs text-dim">{cert.description}</p>
    </div>
  ))}
</div>
