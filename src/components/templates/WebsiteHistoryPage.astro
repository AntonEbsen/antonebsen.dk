---
import Layout from '@layouts/BaseBaseBaseLayout.astro';
import { getEntry } from 'astro:content';

interface Props {
  lang: 'da' | 'en';
}

const { lang } = Astro.props;
const isDa = lang === 'da';

const entry = await getEntry('website-history', lang);
if (!entry) {
  throw new Error(`Could not find website-history content for ${lang}`);
}
const content = entry.data;

const contactLink = isDa ? '/contact' : '/en/contact';
const blogLink = isDa ? '/blog' : '/en/blog';
const resLink = isDa ? '/resources' : '/en/resources';
const catHash = isDa ? '#cat-fagligt' : '';
---

<Layout 
  title={content.title}
  description={content.desc}
  bodyClass="blog-page"
>
  <!-- Page specific CSS -->
  <link rel="stylesheet" href="/assets/css/blog.css" slot="head" />

  <main class="blog-wrap">

    <!-- POST HERO -->
    <section class="card hero">
      <div>
        <p class="eyebrow">{content.eyebrow}</p>
        <h1>{content.h1}</h1>
        <p class="lead">
          {content.lead}
        </p>

        <div class="cta">
          <a class="btn" href="#tldr"><i class="fa-solid fa-bolt"></i> {content.btns.tldr}</a>
          <a class="btn ghost" href="#timeline"><i class="fa-solid fa-clock"></i> {content.btns.time}</a>
          <a class="btn ghost" href="#next"><i class="fa-solid fa-forward"></i> {content.btns.next}</a>
        </div>
      </div>

      <div class="hero-side">
        <div class="mini-card">
          <h2 class="section-title">{content.meta.title}</h2>
          <p class="muted" style="margin:0;">
            {content.meta.updated} <strong>{content.meta.date}</strong><br/>
            {content.meta.time} <strong>{content.meta.val}</strong><br/>
            {content.meta.tags} <strong>{content.meta.tagsVal}</strong>
          </p>
        </div>
      </div>
    </section>

    <!-- CONTENT -->
    <article class="card post" style="margin-top:14px;">

      <!-- TL;DR -->
      <section id="tldr">
        <h2 class="section-title">{content.tldr.title}</h2>
        <ul>
            {content.tldr.list.map(l => <li>{l}</li>)}
        </ul>
      </section>

      <hr class="divider">

      <!-- WHY -->
      <section>
        <h2 class="section-title">{content.why.title}</h2>
        <p>{content.why.p1}</p>
        <p>{content.why.p2}</p>
      </section>

      <hr class="divider">

      <!-- BUILD -->
      <section>
        <h2 class="section-title">{content.build.title}</h2>
        <p>{content.build.intro}</p>

        <div class="grid" style="margin-top:12px;">
          {[content.build.p1, content.build.p2, content.build.p3].map(p => (
            <div class="card post">
              <div class="post-top">
                <h3 class="post-title">{p.title}</h3>
                <span class="tag">{p.tag}</span>
              </div>
              <p class="muted" style="margin:0;">
                {p.text}
              </p>
            </div>
          ))}
        </div>
      </section>

      <hr class="divider">

      <!-- TIMELINE -->
      <section id="timeline">
        <h2 class="section-title">{content.timeline.title}</h2>

        <div class="card" style="background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.06);">
          <ul style="margin:0; padding-left:18px;">
            {content.timeline.list.map(l => <li set:html={l} />)}
          </ul>
        </div>

        <p class="muted" style="margin-top:12px;">
          {content.timeline.outro}
        </p>
      </section>

      <hr class="divider">

      <!-- WHAT IT ENABLES -->
      <section>
        <h2 class="section-title">{content.enables.title}</h2>
        <ul>
            {content.enables.list.map(l => <li set:html={l} />)}
        </ul>
      </section>

      <hr class="divider">

      <!-- NEXT -->
      <section id="next">
        <h2 class="section-title">{content.next.title}</h2>
        <p>{content.next.text}</p>

        <div class="cta" style="margin-top:12px;">
          <a class="btn" href={`${blogLink}${catHash}`}><i class="fa-solid fa-arrow-left"></i> {content.next.btns.back}</a>
          <a class="btn ghost" href={resLink}><i class="fa-solid fa-download"></i> {content.next.btns.res}</a>
          <a class="btn ghost" href={contactLink}><i class="fa-solid fa-envelope"></i> {content.next.btns.contact}</a>
        </div>
      </section>

    </article>

    <!-- CTA card -->
    <section class="card" style="margin-top:14px;">
      <h2 class="section-title">{content.feedback.title}</h2>
      <p class="muted">
        {content.feedback.text}
      </p>
      <div class="cta">
        <a class="btn" href="mailto:anton.ebsen@gmail.com"><i class="fa-solid fa-paper-plane"></i> {content.feedback.mail}</a>
        <a class="btn ghost" href={contactLink}>{content.feedback.page}</a>
      </div>
    </section>

  </main>
</Layout>



