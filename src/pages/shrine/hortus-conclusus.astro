
---
import '@styles/styles.css';
---

<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hortus Conclusus | Jomfruens Have</title>
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Fonts -->
    <link rel="icon" type="image/svg+xml" href="/assets/favicon-cross.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        body { font-family: 'Cinzel', serif; }
        .text-body { font-family: 'Playfair Display', serif; }
        
        /* Light/Garden Theme Overrides */
        .sky-gradient {
            background: linear-gradient(to bottom, #87CEEB 0%, #E0F7FA 100%);
        }
    </style>
</head>
<body class="sky-gradient text-gray-800 min-h-screen relative overflow-hidden flex flex-col items-center select-none">

    <!-- Nav -->
    <nav class="fixed top-8 left-8 z-50">
        <a href="/shrine" class="text-white/80 hover:text-white drop-shadow-md transition-colors text-xl flex items-center gap-2">
            <i class="fa-solid fa-arrow-left"></i>
            <span class="text-xs uppercase tracking-widest hidden md:inline">Forlad Haven</span>
        </a>
    </nav>
    
    <!-- Sun/Light -->
    <div class="fixed top-[-100px] right-[-100px] w-[500px] h-[500px] bg-yellow-100/30 rounded-full blur-[100px] pointer-events-none"></div>

    <!-- MAIN GARDEN CANVAS -->
    <div class="fixed inset-0 z-0 flex items-end justify-center pointer-events-none">
        
        <!-- Background Walls (The "Conclusus") -->
        <div class="absolute bottom-0 w-full h-[35vh] bg-[#e8e4c9] border-t-8 border-[#d4cfb0]"></div>
        
        <!-- Grass -->
        <div class="absolute bottom-0 w-full h-[30vh] bg-gradient-to-t from-[#2d5a27] to-[#6aa856]"></div>
        
        <!-- STATUE -->
         <div class="absolute bottom-[5vh] z-10 drop-shadow-2xl transition-opacity animate-in">
            <img src="/assets/statue_virgin_mary.png" alt="Statue of Virgin Mary" class="h-[50vh] md:h-[60vh] object-contain opacity-95">
         </div>

        <!-- Flowers Container (Spans full width) -->
        <div id="flower-bed" class="absolute bottom-[2vh] w-full h-[30vh] z-20 pointer-events-none overflow-hidden">
            <!-- Populated by JS -->
        </div>
    </div>

    <!-- UI LAYER -->
    <main class="relative z-10 w-full min-h-screen flex flex-col items-center justify-between pt-16 pb-8 pointer-events-none">
        
        <div class="text-center pointer-events-auto">
            <h1 class="text-4xl md:text-6xl text-white font-serif drop-shadow-lg mb-2">Hortus Conclusus</h1>
            <p class="text-body text-white/90 text-lg italic drop-shadow-md">En indesluttet have er min søster, min brud.</p>
        </div>

        <!-- Planting Controls -->
        <div class="bg-white/60 backdrop-blur-md p-6 rounded-2xl shadow-xl w-[90%] max-w-md pointer-events-auto transition-all hover:bg-white/90 hover:shadow-2xl translate-y-0 mb-4">
            <h3 class="text-center text-xs uppercase tracking-widest text-gray-500 mb-4">Plant en bøn</h3>
            
            <div class="grid grid-cols-3 gap-4 mb-4">
                <button onclick="selectFlower('rose')" class="flower-btn group flex flex-col items-center gap-2 p-2 rounded hover:bg-red-50 transition-colors border border-transparent hover:border-red-100">
                     <i class="fa-solid fa-seedling text-red-500 text-2xl group-hover:scale-110 transition-transform"></i>
                     <span class="text-[10px] uppercase text-gray-500">Rose</span>
                     <span class="text-[8px] text-gray-400 italic">Kærlighed</span>
                </button>
                <button onclick="selectFlower('lily')" class="flower-btn group flex flex-col items-center gap-2 p-2 rounded hover:bg-yellow-50 transition-colors border border-transparent hover:border-yellow-100">
                     <i class="fa-solid fa-leaf text-yellow-500 text-2xl group-hover:scale-110 transition-transform"></i>
                     <span class="text-[10px] uppercase text-gray-500">Lilje</span>
                     <span class="text-[8px] text-gray-400 italic">Renhed</span>
                </button>
                <button onclick="selectFlower('violet')" class="flower-btn group flex flex-col items-center gap-2 p-2 rounded hover:bg-purple-50 transition-colors border border-transparent hover:border-purple-100">
                     <i class="fa-solid fa-spa text-purple-500 text-2xl group-hover:scale-110 transition-transform"></i>
                     <span class="text-[10px] uppercase text-gray-500">Viol</span>
                     <span class="text-[8px] text-gray-400 italic">Ydmyghed</span>
                </button>
            </div>

            <input type="text" id="intention-input" placeholder="Din Intention (valgfri)..." class="w-full bg-transparent border-b border-gray-300 text-gray-700 font-serif text-center pb-2 focus:outline-none focus:border-green-500 transition-colors placeholder:italic placeholder:text-gray-400 mb-6">

            <button onclick="plant()" class="w-full py-3 bg-[#5c8a4c] text-white uppercase text-xs tracking-widest hover:bg-[#4a723b] transition-colors shadow-lg">
                Plant i Haven
            </button>
        </div>

    </main>

    <script>
        const flowerBed = document.getElementById('flower-bed');
        const intentionInput = document.getElementById('intention-input') as HTMLInputElement;
        
        let selectedType = 'rose';

        (window as any).selectFlower = (type: string) => {
            selectedType = type;
            // Visual feedback on selection
            document.querySelectorAll('.flower-btn').forEach(b => b.classList.remove('bg-gray-100'));
            // (Simulated selection state logic here)
        };

        (window as any).plant = () => {
            if(!flowerBed) return;
            const intention = intentionInput.value;
            
            // Create Flower Element
            const flower = document.createElement('div');
            flower.className = "absolute origin-bottom animate-grow cursor-help group flex flex-col items-center";
            
            // Random Position
            // Spread across 5% to 95% width
            let leftPos = Math.random() * 90 + 5; 
            
            flower.style.left = `${leftPos}%`;
            flower.style.bottom = `${Math.random() * 15}%`; // Varied depth
            
            const scale = 0.6 + Math.random() * 0.6; // 0.6 to 1.2
            const rot = -15 + Math.random() * 30;
            flower.style.transform = `scale(${scale}) rotate(${rot}deg)`;
            flower.style.zIndex = Math.floor(scale * 100).toString(); // Bigger in front

            // Icon based on type
            let headColor = "";
            let headIcon = "fa-fan"; // default rose-ish
            
            if(selectedType === 'rose') { 
                headColor = "text-red-500"; 
                headIcon = "fa-fan";
            }
            else if(selectedType === 'lily') { 
                headColor = "text-white drop-shadow-[0_4px_4px_rgba(0,0,0,0.2)]"; 
                headIcon = "fa-leaf"; 
            }
            else { 
                headColor = "text-violet-500"; 
                headIcon = "fa-spa";
            }

            flower.innerHTML = `
                <div class="${headColor} text-5xl filter drop-shadow-sm transition-transform group-hover:scale-110">
                    <i class="fa-solid ${headIcon} ${selectedType === 'rose' ? 'fa-spin-pulse' : ''}" style="animation-duration: ${3 + Math.random()}s;"></i>
                </div>
                <div class="w-1 h-24 bg-green-700/80 rounded-full mt-[-2px]"></div>
                
                ${intention ? `
                <div class="hidden group-hover:block absolute bottom-full mb-2 bg-white/95 p-3 rounded-lg text-xs text-gray-600 shadow-xl whitespace-nowrap z-50 pointer-events-none transform -translate-x-1/2 left-1/2">
                    <span class="italic">"${intention}"</span>
                    <div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-white/95"></div>
                </div>` : ''}
            `;
            
            flowerBed.appendChild(flower);
            
            intentionInput.value = '';
        };

        function saveGarden() {
            // Save just the types? For now let's just keep it ephemeral + reload default
        }
        
        // Pre-populate visually
        function initGarden() {
             for(let i=0; i<5; i++) {
                 const t = ['rose','lily','violet'][Math.floor(Math.random()*3)];
                 selectedType = t;
                 (window as any).plant();
             }
             intentionInput.value = ''; // clear initial mock data inputs
        }
        
        setTimeout(initGarden, 100);

    </script>
    
    <style>
        @keyframes grow {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .animate-grow {
            animation: grow 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }
        
        .animate-in {
            animation: fadeIn 2s ease-out forwards;
            opacity: 0;
        }
        @keyframes fadeIn { to { opacity: 0.95; } }
    </style>
</body>
</html>
