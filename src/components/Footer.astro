---
import { getLangFromUrl, useTranslations, useNav } from '@i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const navItems = useNav(lang);
const isEn = lang === 'en';

const year = new Date().getFullYear();
---

<footer class="site-footer" role="contentinfo">
  <div class="footer-container">

    <div class="footer-top">
      <!-- Brand / kort pitch -->
      <section class="footer-col footer-brand" aria-label="Om siden">
        <h2 class="footer-title">{t('footer.brand.title')}</h2>
        <p class="footer-text">
          {t('footer.brand.text')}
        </p>

        <div class="footer-cta">
          <a class="footer-btn" href={isEn ? "/en/cv" : "/cv"}>
            <i class="fa-solid fa-file-lines" aria-hidden="true"></i> {isEn ? "CV" : "CV"}
          </a>
          <a class="footer-btn footer-btn-ghost" href="/assets/Anton-CV.pdf" target="_blank" rel="noopener">
            <i class="fa-solid fa-download" aria-hidden="true"></i> {isEn ? "Download PDF" : "Download PDF"}
          </a>
        </div>
      </section>

      <!-- Navigation -->
      <nav class="footer-col" aria-label="Footer navigation">
        <h3 class="footer-title-sm">{t('footer.col.links')}</h3>
        <ul class="footer-list">
          {navItems.map(item => (
            <li><a href={item.url}>{item.label}</a></li>
          ))}
        </ul>
      </nav>

      <!-- Udvalgte sider -->
      <nav class="footer-col" aria-label="Udvalgte sider">
        <h3 class="footer-title-sm">{t('footer.col.selected')}</h3>
        <ul class="footer-list">
            <li><a href={isEn ? "/en/resources" : "/resources"}>Downloads</a></li>
            <li><a href={isEn ? "/en/gallery" : "/gallery"}>Galleri</a></li>
            <li><a href={isEn ? "/en/timeline" : "/timeline"}>MilepÃ¦le</a></li>
            <li><a href="/changelog">Versionshistorik ðŸ“œ</a></li>
        </ul>
      </nav>

      <!-- Kontakt + SoMe -->
      <section class="footer-col footer-contact" aria-label="Kontakt og profiler">
        <h3 class="footer-title-sm">{t('footer.col.contact')}</h3>

        <address class="footer-text footer-address">
          <div class="footer-address-row">
            <span class="footer-kicker">Email</span><br>
            <a href="mailto:anton.ebsen@gmail.com">anton.ebsen@gmail.com</a>
          </div>

          <div class="footer-address-row">
            <span class="footer-kicker">{isEn ? "Phone" : "Telefon"}</span><br>
            <a href="tel:+4525740131">+45 25 74 01 31</a>
          </div>

          <div class="footer-address-row">
            <span class="footer-kicker">{isEn ? "Location" : "Lokation"}</span><br>
            {isEn ? "Copenhagen, DK" : "KÃ¸benhavn, DK"}
          </div>
        </address>

        <div class="footer-social" aria-label="Sociale links">
          <a href="https://www.linkedin.com/in/antonebsen/" target="_blank" rel="noopener" aria-label="LinkedIn">
            <i class="fa-brands fa-linkedin" aria-hidden="true"></i>
          </a>
          <a href="https://github.com/AntonEbsen" target="_blank" rel="noopener" aria-label="GitHub">
            <i class="fa-brands fa-github" aria-hidden="true"></i>
          </a>
        </div>
      </section>
    </div>

    <div class="footer-bottom">
      <nav class="footer-legal" aria-label="Juridiske sider">
           <a href="#">Privacy</a>
           <span aria-hidden="true">Â·</span>
           <a href="#">Terms</a>
           <span aria-hidden="true">Â·</span>
           <a href="/dashboard" class="opacity-10 hover:opacity-100 text-gold-500 transition-opacity" title="Quantum Analytics">Ï€</a>
      </nav>

      <p class="footer-copy">
        &copy; {year} Anton Meier Ebsen JÃ¸rgensen. {isEn ? "All rights reserved." : "Alle rettigheder forbeholdes."}
        <span class="footer-copy-muted">{isEn ? "Source code:" : "Kildekode:"}
          <a href="https://github.com/AntonEbsen/antonebsen.dk" target="_blank" rel="noopener">GitHub</a>.
        </span>
        <button onclick="document.dispatchEvent(new CustomEvent('openShrine'))" class="opacity-10 hover:opacity-100 hover:text-gold-500 transition-all ml-2 duration-700" title="Ad Majorem Dei Gloriam">
            <i class="fa-solid fa-cross"></i>
        </button>
      </p>
    </div>

  </div>
</footer>
