---
import Layout from '@layouts/Layout.astro';
import Section from '@components/ui/Section.astro';
import Card from '@components/ui/Card.astro';
import Button from '@components/ui/Button.astro';

import cv from '@data/cv.json';
import skillsData from '@data/skills.json';
---

<Layout 
  title="Anton Meier Ebsen Jørgensen – CV" 
  description="CV: Anton Meier Ebsen Jørgensen – økonomistuderende med fokus på makroøkonomi, økonometri og økonomiske modeller."
  bodyClass="cv-page"
>
  <div class="cv-wrap">
  <!-- TOC -->
    <aside class="toc" id="toc" aria-label="Indholdsfortegnelse">
      <div class="toc-header">
        <button
          id="tocToggle"
          class="toc-toggle"
          type="button"
          aria-expanded="true"
          aria-controls="tocNav"
          aria-label="Vis/skjul indholdsfortegnelse"
          title="Vis/skjul indholdsfortegnelse"
        >
          <span class="hamburger" aria-hidden="true"></span>
        </button>
      </div>

      <nav id="tocNav" class="toc-nav">
        <a href="#profile">Profil</a>
        <a href="#experience">Erhvervserfaring</a>
        <a href="#education">Uddannelse</a>
        <a href="#projects">Projekter</a>
        <a href="#skills">Kompetencer</a>
        <a href="#languages">Sprog</a>
        <a href="#volunteer">Frivilligt</a>
        <a href="#certifications">Certificeringer</a>
        <a href="#contact">Kontakt</a>
      </nav>
    </aside>

    <!-- CV grid -->
    <section class="cv-grid" aria-label="CV indhold">

      <!-- Sidebar -->
      <aside class="cv-side">
        <div class="card profile-card">
          <img src="/assets/img/billede-af-mig.jpg" alt="Anton Meier Ebsen Jørgensen" class="profile-img">

          <div class="profile-head">
            <h1>Anton Meier Ebsen Jørgensen</h1>
            <p class="subtitle">Økonomistuderende (cand.polit.) · Makroøkonomi · Økonometri · Økonomiske modeller</p>
          </div>

          <div class="meta">
            <div class="meta-row">
              <span class="meta-label">Lokation</span>
              <span class="meta-value">
                <a href="https://www.google.com/maps/search/?api=1&query=K%C3%B8benhavn" target="_blank" rel="noopener">København</a>
              </span>
            </div>

            <div class="meta-row">
              <span class="meta-label">Email</span>
              <span class="meta-value"><a href="mailto:anton.ebsen@gmail.com">anton.ebsen@gmail.com</a></span>
            </div>

            <div class="meta-row">
              <span class="meta-label">Telefon</span>
              <span class="meta-value"><a href="tel:+4525740131">+45 25 74 01 31</a></span>
            </div>

            <!-- Ikoner i stedet for tekst-rows -->
            <div class="meta-row">
              <span class="meta-label">Profiler</span>
              <span class="meta-value icon-links" aria-label="Profiler">
                <a class="icon-link" href="https://www.linkedin.com/in/antonebsen/" target="_blank" rel="noopener" aria-label="LinkedIn">
                  <i class="fa-brands fa-linkedin" aria-hidden="true"></i>
                </a>
                <a class="icon-link" href="https://github.com/AntonEbsen" target="_blank" rel="noopener" aria-label="GitHub">
                  <i class="fa-brands fa-github" aria-hidden="true"></i>
                </a>
              </span>
            </div>
          </div>

          <div class="cta-row">
            <a class="btn" href="/assets/Anton-CV.pdf" target="_blank" rel="noopener">
              <i class="fa-solid fa-download" aria-hidden="true"></i> Download CV (PDF)
            </a>
          </div>
        </div>

        <div class="card" id="skills">
          <h2>Kompetencer</h2>
          <h3>Faglige kompetencer</h3>
          <div class="focus-grid" aria-label="Faglige kompetencer">
            {skillsData.professional.map(skill => (
              <a class="focus-box" href={`/skills#${skill.id}`} title={skill.title}>
                <i class={skill.icon} aria-hidden="true"></i>
                <span>{skill.name}</span>
              </a>
            ))}
          </div>

          <hr class="divider">
          <h3>Programmeringssprog</h3>
          <div class="skills-grid" aria-label="Programmeringssprog">
            {skillsData.programming.map(skill => (
              <a class="skill-box" href={`/skills#${skill.id}`} title={skill.title}>
                <i class={skill.icon} aria-hidden="true"></i>
                <span>{skill.name}</span>
              </a>
            ))}
          </div>
        
          <hr class="divider">
        
          <h3>Fokusområder</h3>
          
          <div class="focus-grid" aria-label="Fokusområder">
            {skillsData.focus.map(skill => (
              <div class="focus-box">
                <i class={skill.icon} aria-hidden="true"></i>
                <span>{skill.name}</span>
              </div>
            ))}
          </div>

          <hr class="divider">

          <div class="lang-grid" aria-label="Sprog">
            {skillsData.languages.map(lang => (
              <div class="lang-box">
                <img src={lang.flag} alt="" class="lang-flag-sm" aria-hidden="true">
                <div class="lang-text">
                  <div class="lang-name">{lang.name}</div>
                  <div class="lang-level">{lang.level}</div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </aside>

      <div class="cv-main">

        <Section id="profile">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-[var(--accent)] mb-4">Profil</h2>
            <p class="mb-4 text-[15px] leading-relaxed opacity-90">
              Engageret økonomistuderende på kandidatuddannelsen ved Københavns Universitet med særligt fokus på
              makroøkonomi, økonometri og økonomiske modeller. Jeg har erfaring med programmering og databehandling
              gennem kurser i Python, tidsrækkemodeller (SAS) og CGE-modeller, samt undervisning i Excel og VBA.
            </p>
            <p class="text-[15px] leading-relaxed opacity-90">
              Jeg trives med at arbejde med tal og komplekse datasæt og med at omsætte analyser til resultater, der kan
              bruges som solidt grundlag for beslutninger.
            </p>
          </Card>
        </Section>

        <Section id="experience">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-[var(--accent)] mb-4">Erhvervserfaring</h2>
            <div class="space-y-0">
              {cv.experience.map(item => (
                <article class="item">
                  <div class="item-head">
                    <h3 class="text-[18px] font-bold m-0 mb-1">{item.title} · {item.organization}</h3>
                    <span class="text-[13px] text-[var(--text-dim)]">{item.location} · {item.period}</span>
                  </div>
                  <ul class="list-none p-0 m-0 mt-3 space-y-1">
                    {item.description.map(bullet => (
                      <li class="relative pl-3 before:content-['•'] before:absolute before:left-0 before:text-[var(--accent)] text-[14px] opacity-90">{bullet}</li>
                    ))}
                  </ul>
                </article>
              ))}
            </div>
          </Card>
        </Section>

        <Section id="education">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-[var(--accent)] mb-4">Uddannelse</h2>
            <div class="space-y-0">
              {cv.education.map(item => (
                <article class="item">
                  <div class="item-head">
                    <h3 class="text-[18px] font-bold m-0 mb-1">{item.degree} · {item.institution}</h3>
                    <span class="text-[13px] text-[var(--text-dim)]">{item.location} · {item.period}</span>
                  </div>
                  {item.description && <p class="text-[14px] text-[var(--text-dim)] mt-2 opacity-80">{item.description}</p>}
                </article>
              ))}
            </div>
          </Card>
        </Section>

        <Section id="projects">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-[var(--accent)] mb-4">Projekter</h2>
            <div class="space-y-0">
              {cv.projects.map(project => (
                <article class="item">
                  <div class="item-head">
                    <h3 class="text-[18px] font-bold m-0 mb-1">{project.title}</h3>
                    {project.meta && <span class="text-[13px] text-[var(--text-dim)]">{project.meta}</span>}
                  </div>
                  <p class="text-[14px] text-[var(--text-dim)] mt-2 opacity-80">
                    {project.description}
                  </p>
                </article>
              ))}
            </div>
          </Card>
        </Section>

        <Section id="volunteer">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-[var(--accent)] mb-4">Frivilligt</h2>
            <article class="item border-none pt-0">
              <div class="item-head">
                 <h3 class="text-[18px] font-bold m-0 mb-1">Forperson · Socialøkonomisk Samfund</h3>
                 <span class="text-[13px] text-[var(--text-dim)]">København K · 2024 – nu</span>
              </div>
              <p class="text-[14px] text-[var(--text-dim)] mt-2 opacity-80">Planlægning/koordinering af aktiviteter og arrangementer.</p>
            </article>
          </Card>
        </Section>

        <Section id="certifications">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-[var(--accent)] mb-4">Certificeringer</h2>
            <div class="cert-grid">
              <div class="cert">
                <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=a59d5c1b-8002-4e13-88a7-b7631f99fecd&" target="_blank" rel="noopener">
                  <img src="/assets/img/matlab-onramp.PNG" alt="MATLAB Onramp certifikat" class="cert-img">
                </a>
                <h3 class="text-sm font-bold mt-2 mb-1">
                  <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=a59d5c1b-8002-4e13-88a7-b7631f99fecd&" target="_blank" rel="noopener" class="no-underline text-white hover:text-[var(--accent)]">
                    MATLAB Onramp
                  </a>
                </h3>
                <p class="text-xs text-[var(--text-dim)]">MATLAB fundamentals og workflows.</p>
              </div>

              <div class="cert">
                <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=0f239f13-05d3-4633-9f7a-889fa81448f5&" target="_blank" rel="noopener">
                  <img src="/assets/img/calculations-with-vectors-and-matrices.PNG" alt="Vectors & Matrices certifikat" class="cert-img">
                </a>
                <h3 class="text-sm font-bold mt-2 mb-1">
                  <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=0f239f13-05d3-4633-9f7a-889fa81448f5&" target="_blank" rel="noopener" class="no-underline text-white hover:text-[var(--accent)]">
                    Calculations with Vectors...
                  </a>
                </h3>
                <p class="text-xs text-[var(--text-dim)]">Lineær algebra i praksis.</p>
              </div>
            </div>
          </Card>
        </Section>

        <Section id="contact">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-[var(--accent)] mb-4">Kontakt</h2>
            <div class="contact-row">
              <Button href="mailto:anton.ebsen@gmail.com" variant="ghost">
                <i class="fa-solid fa-envelope mr-2" aria-hidden="true"></i>
                anton.ebsen@gmail.com
              </Button>
  
              <Button href="https://www.linkedin.com/in/antonebsen/" target="_blank" rel="noopener" aria-label="LinkedIn" variant="ghost">
                <i class="fa-brands fa-linkedin" aria-hidden="true"></i>
              </Button>
  
              <Button href="https://github.com/AntonEbsen" target="_blank" rel="noopener" aria-label="GitHub" variant="ghost">
                <i class="fa-brands fa-github" aria-hidden="true"></i>
              </Button>
            </div>
          </Card>
        </Section>
      </div>
    </section>
  </div>

  <script>
    (function () {
      const wrap = document.querySelector(".cv-wrap");
      const btn = document.getElementById("tocToggle");
      if (!wrap || !btn) return;

      function applyFromStorage() {
        const collapsed = localStorage.getItem("tocCollapsed") === "1";
        wrap.classList.toggle("is-toc-collapsed", collapsed);
        btn.setAttribute("aria-expanded", String(!collapsed));
      }

      btn.addEventListener("click", function () {
        const nowCollapsed = wrap.classList.toggle("is-toc-collapsed");
        btn.setAttribute("aria-expanded", String(!nowCollapsed));
        localStorage.setItem("tocCollapsed", nowCollapsed ? "1" : "0");
      });

      document.addEventListener("DOMContentLoaded", applyFromStorage);
    })();
  </script>
</Layout>

<style>
/* 1) Outer layout: TOC + rest */
.cv-wrap {
  max-width: 1200px;
  margin: 24px auto;
  padding: 0 16px 32px;

  display: grid;
  grid-template-columns: 280px minmax(0, 1fr);
  gap: 22px;
  align-items: start;
}

/* 2) TOC */
.toc {
  position: sticky !important;
  top: 100px;
  padding: 24px;
  background: var(--glass);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: var(--radius);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow);
  z-index: 2;
}

/* === Pæne bokse tilbage === */
.card,
.section {
  background: var(--glass);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-radius: var(--radius);
  padding: 24px;
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow);
  transition: transform 0.3s ease, border-color 0.3s ease;
}

.card:hover,
.section:hover {
  border-color: var(--accent-soft);
}

.section-title {
  margin: 0 0 24px;
  font-size: 13px;
  text-transform: uppercase;
  letter-spacing: 0.2em;
  font-weight: 800;
  color: var(--accent);
}

.item {
  padding: 16px 0;
  border-top: 1px solid var(--glass-border);
  position: relative;
}

.item::after {
  content: "";
  position: absolute;
  left: 0;
  top: 0;
  width: 2px;
  height: 0;
  background: var(--accent);
  transition: height 0.3s ease;
}

.item:hover::after {
  height: 100%;
}

.item:first-of-type {
  border-top: 0;
  padding-top: 0;
}

.item-head h3 {
  margin: 0 0 4px;
  font-size: 18px;
  font-weight: 700;
  letter-spacing: -0.01em;
}

.item-meta {
  font-size: 13px;
  color: var(--text-dim);
}

.profile-card .profile-img {
  width: 100%;
  height: 280px;
  object-fit: cover;
  border-radius: 14px;
  display: block;
  margin-bottom: 12px;
}


/* Header med hamburger */
.toc-header {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 10px;
  margin-bottom: 10px;
}

.toc-toggle {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  border: 1px solid rgba(0, 0, 0, 0.10);
  background: var(--glass);
  cursor: pointer;
  display: grid;
  place-items: center;
  padding: 0;
}

.toc-toggle:hover {
  background: #f5f7ff;
}

/* Hamburger ikon (3 streger) */
.hamburger {
  width: 18px;
  height: 2px;
  background: #111827;
  border-radius: 2px;
  position: relative;
  display: block;
  pointer-events: none;
}

.hamburger::before,
.hamburger::after {
  content: "";
  width: 18px;
  height: 2px;
  background: #111827;
  border-radius: 2px;
  position: absolute;
  left: 0;
}

.hamburger::before {
  top: -6px;
}

.hamburger::after {
  top: 6px;
}

/* TOC links */
.toc-nav a {
  display: block;
  padding: 8px 10px;
  border-radius: 10px;
  color: var(--text);
  text-decoration: none;
}

.toc-nav a:hover {
  background: #f0f2ff;
}

/* 3) Collapse behavior */
.cv-wrap.is-toc-collapsed {
  grid-template-columns: 72px minmax(0, 1fr);
}

.cv-wrap.is-toc-collapsed .toc {
  padding: 12px;
}

.cv-wrap.is-toc-collapsed .toc-nav {
  display: none;
}

/* 4) Inner CV layout: sidebar + main (no overlap) */
.cv-grid {
  display: grid;
  grid-template-columns: minmax(0, 360px) minmax(0, 1fr);
  gap: 22px;
  align-items: start;
}

.cv-side,
.cv-main {
  min-width: 0;
}

/* Spacing mellem bokse i venstre/højre kolonne */
.cv-side,
.cv-main {
  display: grid;
  gap: 14px;
}

/* 5) Responsive */
@media (max-width: 980px) {
  .cv-wrap {
    grid-template-columns: 1fr;
    padding-left: 14px !important;
    padding-right: 14px !important;
    margin-top: 16px;
    display: block !important;
    max-width: 100% !important;
  }

  .toc {
    position: relative !important;
    top: 0 !important;
    width: 100% !important;
    margin: 0 auto 14px !important;
  }

  .cv-grid {
    grid-template-columns: 1fr;
    width: 100% !important;
    margin: 0 auto !important;
    display: block !important;
  }

  /* Hvis collapsed på mobil: skjul hele TOC */
  .cv-wrap.is-toc-collapsed .toc {
    display: none;
  }

  .card,
  .section {
    padding: 16px !important;
    border-radius: 14px;
  }

  h1, h2, h3, p, li, a {
    overflow-wrap: anywhere;
    word-break: break-word;
  }
}

/* Fixes for Astro scoping */
:global(.cv-page) .container {
  width: 100% !important;
  max-width: none !important;
  margin: 0 !important;
  padding: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
}

.cv-wrap > .toc {
  grid-column: 1;
}

.cv-wrap > .cv-grid {
  grid-column: 2;
}

@media (max-width: 980px) {
  .cv-wrap > .toc,
  .cv-wrap > .cv-grid {
    grid-column: 1;
  }
}

/* Skills: flotte bokse */
.skills-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
  margin-top: 10px;
}

@media (min-width: 560px) {
  .skills-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (min-width: 980px) {
  .skills-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.skill-box {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
  border-radius: 14px;
  text-decoration: none;
  color: var(--text);
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--glass-border);
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.skill-box:hover {
  transform: translateY(-2px) scale(1.02);
  background: rgba(255, 255, 255, 0.08);
  box-shadow: var(--glow);
  border-color: var(--accent);
}

.skill-box i {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  background: rgba(17, 24, 39, 0.06);
  flex: 0 0 auto;
}

.skill-box span {
  font-weight: 700;
  font-size: 14px;
  line-height: 1.2;
}

/* Fokusområder: små bokse */
.focus-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
  margin-top: 10px;
}

@media (min-width: 560px) {
  .focus-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.focus-box {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 12px;
  border-radius: 14px;
  background: rgba(17, 24, 39, 0.03);
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.focus-box i {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  display: grid;
  place-items: center;
  background: rgba(17, 24, 39, 0.06);
  flex: 0 0 auto;
}

.focus-box span {
  font-weight: 700;
  font-size: 14px;
  line-height: 1.2;
}

/* Sprog: bokse med flag */
.lang-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 10px;
  margin-top: 10px;
}

@media (min-width: 560px) {
  .lang-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.lang-box {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 12px;
  border-radius: 14px;
  background: rgba(17, 24, 39, 0.03);
  border: 1px solid rgba(0, 0, 0, 0.08);
}

.lang-flag-sm {
  width: 42px;
  height: 28px;
  border-radius: 8px;
  object-fit: cover;
  border: 1px solid rgba(0, 0, 0, 0.12);
  flex: 0 0 auto;
}

.lang-text {
  min-width: 0;
}

.lang-name {
  font-weight: 800;
  font-size: 14px;
  line-height: 1.2;
}

.lang-level {
  font-size: 13px;
  color: var(--muted);
  line-height: 1.25;
  margin-top: 2px;
}

.meta {
  margin-top: 12px;
  display: grid;
  gap: 10px;
}

.meta-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.meta-label {
  font-weight: 700;
  font-size: 13px;
  color: rgba(17, 24, 39, 0.72);
}

.meta-value {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.meta-value a {
  color: var(--text);
}

.icon-links {
  gap: 10px;
}

.icon-link {
  width: 38px;
  height: 38px;
  border-radius: 10px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  background: rgba(17, 24, 39, 0.06);
}

.icon-link:hover {
  background: rgba(17, 24, 39, 0.10);
}

.contact-row {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items: center;
}

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 24px;
  border-radius: 999px;
  background: var(--accent);
  color: #050506;
  text-decoration: none;
  font-weight: 700;
  font-size: 14.5px;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: var(--glow);
}

.btn.ghost {
  background: transparent;
  border: 1.5px solid var(--accent);
  color: var(--accent);
}

.divider {
  border: 0;
  border-top: 1px solid var(--glass-border);
  margin: 20px 0;
}
</style>

  <!-- TOC toggle script -->
  <script>
    (function () {
      const wrap = document.querySelector(".cv-wrap");
      const btn = document.getElementById("tocToggle");
      if (!wrap || !btn) return;

      function applyFromStorage() {
        const collapsed = localStorage.getItem("tocCollapsed") === "1";
        wrap.classList.toggle("is-toc-collapsed", collapsed);
        btn.setAttribute("aria-expanded", String(!collapsed));
      }

      btn.addEventListener("click", function () {
        const nowCollapsed = wrap.classList.toggle("is-toc-collapsed");
        btn.setAttribute("aria-expanded", String(!nowCollapsed));
        localStorage.setItem("tocCollapsed", nowCollapsed ? "1" : "0");
      });

      document.addEventListener("DOMContentLoaded", applyFromStorage);
    })();
  </script>
</Layout>
