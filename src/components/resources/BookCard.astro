---
import Card from '../ui/Card.astro';
import Pill from '../ui/Pill.astro';
import Button from '../ui/Button.astro';

interface Props {
  title: string;
  author: string;
  year?: string;
  genre?: string;
  tag?: string;
  note: string;
  links?: {
    label: string;
    url: string;
    icon?: string;
    disabled?: boolean;
    class?: string;
  }[];
}

const { title, author, year, genre, tag, note, links } = Astro.props;
---

<Card variant="bordered" class="flex flex-col h-full bg-[rgba(17,24,39,0.02)]">
  <div class="flex justify-between items-start mb-2 gap-2">
    <h3 class="text-[16px] font-bold leading-tight m-0">{title}</h3>
    {tag && <Pill variant="accent" class="shrink-0">{tag}</Pill>}
  </div>
  <p class="text-[13px] text-dim mb-3 opacity-90">
    {author} {year && `· (${year})`} {genre && `· ${genre}`}
  </p>
  <p class="text-[14px] text-dim flex-grow mb-4 leading-relaxed">
    <strong class="text-accent text-xs uppercase tracking-wide block mb-1">Min note:</strong>
    {note}
  </p>
  {links && (
    <div class="flex flex-wrap gap-2 mt-auto pt-3 border-t border-[var(--glass-border)]">
      {links.map(link => (
        <a 
          href={link.url}
          class:list={[
            "text-xs font-bold transition-colors inline-flex items-center",
            link.disabled ? "opacity-50 cursor-not-allowed text-dim" : "text-accent hover:text-white"
          ]}
          aria-disabled={link.disabled}
        >
          {link.icon && <i class:list={[link.icon, "mr-1.5"]}></i>} {link.label}
        </a>
      ))}
    </div>
  )}
</Card>
