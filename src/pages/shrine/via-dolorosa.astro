
---
import '@styles/styles.css';
---

<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Via Dolorosa | Korsets Vej</title>
    <meta name="robots" content="noindex, nofollow">
    
    <!-- Fonts -->
    <link rel="icon" type="image/svg+xml" href="/assets/favicon-cross.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        body { font-family: 'Cinzel', serif; }
        .text-body { font-family: 'Playfair Display', serif; }
        
        /* Smooth Scroll */
        html { scroll-behavior: smooth; }
        
        /* Locked Scroll visual */
        .locked-path {
            opacity: 0.1;
            filter: blur(5px);
            pointer-events: none;
            transition: all 1s ease-in-out;
        }
        .unlocked-path {
            opacity: 1;
            filter: blur(0);
            pointer-events: auto;
        }
    </style>
</head>
<body class="bg-black text-gray-400 overflow-x-hidden selection:bg-red-900/40">

    <!-- Fixed Header -->
    <nav class="fixed top-0 left-0 w-full p-8 z-50 flex justify-between items-start mix-blend-difference">
        <a href="/shrine" class="text-gray-500 hover:text-white transition-colors text-xl flex items-center gap-2">
            <i class="fa-solid fa-arrow-left"></i>
            <span class="text-xs uppercase tracking-widest hidden md:inline">Forlad Vejen</span>
        </a>
        
        <div class="text-right">
            <h1 class="text-gold-500 text-sm uppercase tracking-[0.3em]">Via Dolorosa</h1>
            <p class="text-[10px] text-gray-600 uppercase tracking-widest mt-1">Station <span id="station-counter">1</span> / 14</p>
        </div>
    </nav>
    
    <!-- Progress Line -->
    <div class="fixed left-8 md:left-20 top-0 bottom-0 w-px bg-gray-900 z-0">
        <div id="progress-bar" class="w-full bg-red-900/50 transition-all duration-1000" style="height: 0%"></div>
    </div>

    <!-- MAIN SCROLL CONTAINER -->
    <main class="relative z-10 max-w-2xl mx-auto px-6 py-40">
        
        <!-- INTRO -->
        <div class="min-h-[60vh] flex flex-col justify-center items-center text-center mb-40">
            <h1 class="text-4xl md:text-6xl text-white font-serif italic mb-6">Korsets Vej</h1>
            <p class="text-body text-gray-500 max-w-md mx-auto leading-relaxed">
                Du er inviteret til at vandre med Kristus mod Golgata.
                <br><br>
                For at gå videre fra hver station må du knæle (klikke) og anerkende lidelsen.
            </p>
            <div class="mt-12 opacity-50 animate-bounce">
                <i class="fa-solid fa-chevron-down text-2xl"></i>
            </div>
        </div>

        <!-- STATIONS -->
        <div id="stations-container">
            <!-- Injected by JS -->
        </div>

        <!-- FINALE -->
        <div id="finale" class="min-h-screen flex flex-col justify-center items-center text-center opacity-0 transition-opacity duration-3000 hidden">
            <div class="w-1 h-32 bg-gradient-to-b from-transparent to-gold-500 mb-8"></div>
            <h2 class="text-5xl text-gold-100 font-serif mb-6">Det er fuldbragt.</h2>
            <p class="text-xs uppercase tracking-[0.5em] text-gold-500/60 mb-12">Consummatum Est</p>
            <a href="/shrine" class="border border-gold-500/30 text-gold-500 px-8 py-3 uppercase text-xs tracking-widest hover:bg-gold-500/10 transition-colors">
                Returner til Helligdommen
            </a>
        </div>

    </main>

    <script>
        const stations = [
            { id: 1, title: "I. Jesus dømmes til døden", latin: "Iesus condemnatur ad mortem", desc: "Pilatus vasker sine hænder. Sandheden står foran ham, men han ser den ikke." },
            { id: 2, title: "II. Jesus tager korset på sig", latin: "Iesus oneraverunt crucem", desc: "Træets tyngde. Det er ikke blot træ, men verdens synder han løfter." },
            { id: 3, title: "III. Jesus falder første gang", latin: "Iesus cadit primum", desc: "Gud snubler i støvet. Menneskets byrde er tungere end universet." },
            { id: 4, title: "IV. Jesus møder sin mor", latin: "Iesus matrem occurrit", desc: "Et blik udveksles. Smertens sværd gennemborer hendes sjæl." },
            { id: 5, title: "V. Simon af Kyrene hjælper Jesus", latin: "Simon Cyrenaeus Iesum adiuvat", desc: "En fremmed tvunget til at bære. Vi må bære hinandens byrder." },
            { id: 6, title: "VI. Veronika tørrer Jesu ansigt", latin: "Veronica faciem Iesu abstergit", desc: "En gestus af ømhed midt i brutaliteten. Hans ansigt præges i klædet." },
            { id: 7, title: "VII. Jesus falder anden gang", latin: "Iesus cadit iterum", desc: "Svagheden vokser. Men viljen til at frelse driver ham op igen." },
            { id: 8, title: "VIII. Jesus trøster kvinderne", latin: "Iesus mulieres Hierosolymitanas consolatur", desc: "'Græd ikke over mig'. Selv i lidelsen tænker han på andres smerte." },
            { id: 9, title: "IX. Jesus falder tredje gang", latin: "Iesus cadit tertium", desc: "Kroppen er brudt. Han ligger på jorden, tæt på det støv vi er skabt af." },
            { id: 10, title: "X. Jesus berøves sine klæder", latin: "Iesus vestibus spoliatur", desc: "Nøgenhed og skam. Han giver alt, intet beholder han for sig selv." },
            { id: 11, title: "XI. Jesus nagles til korset", latin: "Iesus cruci clavi figitur", desc: "Jern gennem kød. Ofret er fastlåst. Kærligheden kan ikke flygte." },
            { id: 12, title: "XII. Jesus dør på korset", latin: "Iesus moritur in cruce", desc: "Mørket falder. Forhænget flænges. Det store offer er bragt." },
            { id: 13, title: "XIII. Jesus tages ned af korset", latin: "Iesus de cruce deponitur", desc: "Pieta. Guds Moder holder igen sin Søn, nu livløs, i sine arme." },
            { id: 14, title: "XIV. Jesus lægges i graven", latin: "Iesus in sepulchro ponitur", desc: "Stilheden. Stenen rulles for. Vi venter i mørket på Lyset." }
        ];

        const container = document.getElementById('stations-container');
        const progressBar = document.getElementById('progress-bar');
        const counter = document.getElementById('station-counter');
        const finale = document.getElementById('finale');
        
        // Render Stations
        // Initially, only Station 1 is visible/unlocked.
        // Subsequent stations are rendered but with 'locked-path' class.
        
        let currentStationIdx = 0;

        function render() {
            if(!container) return;
            container.innerHTML = '';
            
            stations.forEach((s, idx) => {
                const isLocked = idx > currentStationIdx;
                const isCurrent = idx === currentStationIdx;
                const isPast = idx < currentStationIdx;
                
                const el = document.createElement('div');
                el.className = `min-h-screen flex flex-col justify-center items-start border-l-2 ${isCurrent ? 'border-red-900' : 'border-gray-900'} pl-8 md:pl-12 my-20 transition-all duration-1000 ${isLocked ? 'locked-path' : 'unlocked-path'}`;
                el.id = `station-${s.id}`;
                
                el.innerHTML = `
                    <span class="text-[10px] text-gray-600 uppercase tracking-[0.3em] mb-4">Statio ${toRoman(s.id)}</span>
                    <h2 class="text-3xl md:text-5xl text-gray-200 font-serif mb-2">${s.title}</h2>
                    <p class="text-xs text-red-900/60 italic font-serif mb-8">${s.latin}</p>
                    
                    <p class="text-body text-gray-400 text-lg leading-relaxed max-w-lg mb-12">
                        ${s.desc}
                    </p>

                    ${!isLocked && !isPast ? `
                    <button onclick="unlockNext(${idx})" class="group flex items-center gap-4 text-xs uppercase tracking-widest text-gray-500 hover:text-white transition-colors">
                        <span class="w-8 h-8 rounded-full border border-gray-700 flex items-center justify-center group-hover:border-white group-hover:bg-white/10 transition-all">
                            <i class="fa-solid fa-person-praying text-[10px]"></i>
                        </span>
                        <span>Vi tilbeder dig, Kristus</span>
                    </button>
                    ` : ''}
                    
                    ${isPast ? `
                    <div class="text-red-900/40 text-xs uppercase tracking-widest flex items-center gap-2">
                        <i class="fa-solid fa-check"></i> Fuldført
                    </div>
                    ` : ''}
                `;
                
                container.appendChild(el);
            });
        }

        (window as any).unlockNext = (idx: number) => {
            if(idx === currentStationIdx) {
                currentStationIdx++;
                updateUI();
                
                // Scroll hint
                if(currentStationIdx < stations.length) {
                    setTimeout(() => {
                        document.getElementById(`station-${stations[currentStationIdx].id}`)?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                } else {
                    // Finale
                    showFinale();
                }
            }
        };

        function updateUI() {
            render(); // Re-render to update states (locked/unlocked/past)
            
            // Update Bar
            const pct = (currentStationIdx / stations.length) * 100;
            if(progressBar) progressBar.style.height = `${pct}%`;
            
            // Update Counter
            if(counter) counter.innerText = (Math.min(currentStationIdx + 1, 14)).toString();
        }

        function showFinale() {
            if(finale) {
                finale.classList.remove('hidden');
                setTimeout(() => finale.classList.remove('opacity-0'), 100);
                finale.scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        function toRoman(num: number) {
            const roman = {M:1000,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};
            let str = '';
            for (let i of Object.keys(roman)) {
                let q = (Math.floor(num / (roman as any)[i]));
                num -= q * (roman as any)[i];
                str += i.repeat(q);
            }
            return str;
        }

        // Init
        render();

    </script>
</body>
</html>
