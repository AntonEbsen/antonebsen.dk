---
import StudyGroupLayout from '../../layouts/study-group/StudyGroupLayout.astro';
import group from '../../data/group.json';

export const prerender = false;
---

<StudyGroupLayout title="Hovedkvarter" activePage="dashboard">
    <div class="space-y-32">
        {/* Header Section */}
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-20 items-end">
            <div class="space-y-8">
                <div class="space-y-4">
                    <span class="bg-red-600/10 text-red-600 px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border border-red-600/20 shadow-sm">Kollektiv Status: Aktiv</span>
                    <h2 class="text-6xl md:text-8xl font-black italic tracking-tighter leading-none text-white">Den Akademiske <br/> <span class="text-red-600">Revolution</span></h2>
                </div>
                
                {/* Mobiliserings-alarmen (Countdown) */}
                <div class="p-8 bg-red-600 border border-red-700 rounded-[32px] shadow-glow-red flex items-center gap-8 group">
                    <div class="w-16 h-16 bg-white flex items-center justify-center rounded-2xl animate-pulse">
                        <i class="fa-solid fa-person-running text-red-600 text-2xl"></i>
                    </div>
                    <div class="flex-1">
                        <p class="text-[10px] font-black uppercase tracking-widest text-white/60 mb-1">Mobiliserings-alarmen: Seminar-aflevering</p>
                        <div id="deadline-timer" class="text-3xl font-black tabular-nums tracking-tighter text-white">
                            00d 00h 00m 00s
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="text-[10px] font-black uppercase tracking-widest text-white/40">Mod Sejren!</p>
                    </div>
                </div>

                <p class="text-white/40 text-lg max-w-lg leading-relaxed italic">
                    Placeringscenter for seminaropgaven og det kommende speciale. Her koordinerer vi vores indsats for at opnå det ultimative akademiske resultat.
                </p>
            </div>
            
            <div class="bg-white/[0.03] border border-white/5 rounded-[48px] p-10 flex items-center justify-between group hover:border-red-600/30 transition-all duration-500">
                <div class="space-y-2">
                    <p class="text-[10px] font-black uppercase tracking-widest text-red-600">Dagens Manifest</p>
                    <p class="text-xl font-bold italic text-white/90">"Hver yder efter evne, hver modtager efter behov."</p>
                </div>
                <i class="fa-solid fa-quote-right text-4xl text-red-600/20 group-hover:text-red-600/40 transition-colors"></i>
            </div>
        </section>

        {/* Members Grid */}
        <section class="space-y-16">
            <div class="flex items-center gap-6">
                <h3 class="text-3xl font-black uppercase tracking-tighter italic">Kameraterne</h3>
                <div class="h-px flex-1 bg-white/5"></div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                {group.map(member => (
                    <div class="bg-white/[0.02] border border-white/5 rounded-[40px] p-8 space-y-6 group hover:bg-white/[0.04] hover:border-red-600/20 transition-all duration-500">
                        <div class="relative w-20 h-20 mx-auto">
                            <div class="absolute inset-0 bg-red-600 rounded-2xl blur-2xl opacity-0 group-hover:opacity-20 transition-opacity"></div>
                            <img src={member.image} alt={member.name} class="w-full h-full rounded-2xl grayscale group-hover:grayscale-0 transition-all duration-700 relative z-10" />
                        </div>
                        <div class="text-center space-y-2">
                            <h4 class="text-lg font-black uppercase tracking-tight text-white">{member.alias}</h4>
                            <p class="text-red-600 text-[10px] font-black uppercase tracking-widest">{member.role}</p>
                            <p class="text-white/30 text-[11px] leading-relaxed italic pt-4">{member.description}</p>
                        </div>
                    </div>
                ))}
            </div>
        </section>

        {/* Quick Status: Moral & Decrees */}
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            {/* Moral-indeks */}
            <div class="space-y-12">
                <h3 class="text-3xl font-black uppercase tracking-tighter italic text-red-600">Moral-indeks</h3>
                <div class="p-10 bg-white/[0.02] border border-white/5 rounded-[48px] space-y-10 relative overflow-hidden">
                    <div class="space-y-8">
                        {[
                            { name: "Stalin", mood: 85, status: "Revolutionær Gejst" },
                            { name: "Mao", mood: 92, status: "Partiloyal Fokus" },
                            { name: "Che", mood: 60, status: "Presset af Reaktionen" }
                        ].map(member => (
                            <div class="space-y-3">
                                <div class="flex justify-between items-end">
                                    <span class="text-[10px] font-black uppercase tracking-widest text-white/40">Kamerat {member.name}</span>
                                    <span class="text-red-600 text-[8px] font-bold italic uppercase tracking-widest">{member.status}</span>
                                </div>
                                <div class="h-2 w-full bg-white/5 rounded-full overflow-hidden">
                                    <div class="h-full bg-red-600 shadow-glow-red" style={`width: ${member.mood}%`}></div>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            </div>

            {/* Dekret-tavlen */}
            <div class="space-y-12">
                <h3 class="text-3xl font-black uppercase tracking-tighter italic text-red-600">Dekret-tavlen</h3>
                <div class="p-10 bg-white/[0.02] border border-white/5 rounded-[48px] space-y-8 relative overflow-hidden">
                    <div class="space-y-6">
                        {[
                            { from: "Stalin", msg: "Nyt udkast til seminaropgaven ligger på Overleaf. Til gennemsyn!", time: "2 timer siden" },
                            { from: "Che", msg: "Jeg tager kaffe og croissanter med på tirsdag. Husk kopper!", time: "5 timer siden" }
                        ].map(decree => (
                            <div class="space-y-2 border-l-2 border-red-600/30 pl-6 py-2">
                                <div class="flex justify-between items-center text-[10px] font-black uppercase tracking-widest text-red-600">
                                    <span>Kamerat {decree.from}</span>
                                    <span class="text-white/20">{decree.time}</span>
                                </div>
                                <p class="text-sm font-medium italic text-white/80">"{decree.msg}"</p>
                            </div>
                        ))}
                    </div>
                    <button class="w-full py-4 bg-white/5 hover:bg-white/10 text-white/40 hover:text-white font-black uppercase tracking-widest rounded-2xl transition-all border border-dashed border-white/10">Udsted nyt dekret +</button>
                </div>
            </div>
        </section>
    </div>
</StudyGroupLayout>

<script>
    // Mobiliserings-alarmen logic
    const deadline = new Date("2026-05-15T12:00:00").getTime();
    const timerDisplay = document.getElementById('deadline-timer');

    function updateCountdown() {
        const now = new Date().getTime();
        const distance = deadline - now;

        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);

        if (timerDisplay) {
            timerDisplay.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }

        if (distance < 0) {
            if (timerDisplay) timerDisplay.innerHTML = "SEJREN ER VUNDET!";
        }
    }

    setInterval(updateCountdown, 1000);
    updateCountdown();
</script>
