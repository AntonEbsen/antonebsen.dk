---
import Layout from '@layouts/Layout.astro';
import Section from '@components/ui/Section.astro';
import Card from '@components/ui/Card.astro';
import Button from '@components/ui/Button.astro';
import { Image } from 'astro:assets';

import cv from '@data/cv.json';
import skillsData from '@data/skills.json';

// Images
import myImage from '@assets/img/billede-af-mig.jpg';
import dkFlag from '@assets/img/dansk-flag.png';
import ukFlag from '@assets/img/britisk-flag.png';
import deFlag from '@assets/img/tysk-flag.png';
import matlabCert from '@assets/img/matlab-onramp.PNG';
import vectorCert from '@assets/img/calculations-with-vectors-and-matrices.PNG';

import '@styles/cv.css';

const flagMap: Record<string, ImageMetadata> = {
  '/assets/img/dansk-flag.png': dkFlag,
  '/assets/img/britisk-flag.png': ukFlag,
  '/assets/img/tysk-flag.png': deFlag
};
---

<Layout 
  title="Anton Meier Ebsen Jørgensen – CV" 
  description="CV: Anton Meier Ebsen Jørgensen – økonomistuderende med fokus på makroøkonomi, økonometri og økonomiske modeller."
  bodyClass="cv-page"
>
  <div class="cv-wrap">
    <!-- TOC -->
    <aside class="toc" id="toc" aria-label="Indholdsfortegnelse">
      <div class="toc-header">
        <button
          id="tocToggle"
          class="toc-toggle"
          type="button"
          aria-expanded="true"
          aria-controls="tocNav"
          aria-label="Vis/skjul indholdsfortegnelse"
          title="Vis/skjul indholdsfortegnelse"
        >
          <span class="hamburger" aria-hidden="true"></span>
        </button>
      </div>

      <nav id="tocNav" class="toc-nav">
        <a href="#profile">Profil</a>
        <a href="#experience">Erhvervserfaring</a>
        <a href="#education">Uddannelse</a>
        <a href="#projects">Projekter</a>
        <a href="#skills">Kompetencer</a>
        <a href="#languages">Sprog</a>
        <a href="#volunteer">Frivilligt</a>
        <a href="#certifications">Certificeringer</a>
        <a href="#contact">Kontakt</a>
      </nav>
    </aside>

    <!-- CV grid -->
    <section class="cv-grid" aria-label="CV indhold">

      <!-- Sidebar -->
      <aside class="cv-side">
        <div class="card profile-card">
          <Image src={myImage} alt="Anton Meier Ebsen Jørgensen" class="profile-img" />

          <div class="profile-head">
            <h1>Anton Meier Ebsen Jørgensen</h1>
            <p class="subtitle">Økonomistuderende (cand.polit.) · Makroøkonomi · Økonometri · Økonomiske modeller</p>
          </div>

          <div class="meta">
            <div class="meta-row">
              <span class="meta-label">Lokation</span>
              <span class="meta-value">
                <a href="https://www.google.com/maps/search/?api=1&query=K%C3%B8benhavn" target="_blank" rel="noopener">København</a>
              </span>
            </div>

            <div class="meta-row">
              <span class="meta-label">Email</span>
              <span class="meta-value"><a href="mailto:anton.ebsen@gmail.com">anton.ebsen@gmail.com</a></span>
            </div>

            <div class="meta-row">
              <span class="meta-label">Telefon</span>
              <span class="meta-value"><a href="tel:+4525740131">+45 25 74 01 31</a></span>
            </div>

            <div class="meta-row">
              <span class="meta-label">Profiler</span>
              <span class="meta-value icon-links" aria-label="Profiler">
                <a class="icon-link" href="https://www.linkedin.com/in/antonebsen/" target="_blank" rel="noopener" aria-label="LinkedIn">
                  <i class="fa-brands fa-linkedin" aria-hidden="true"></i>
                </a>
                <a class="icon-link" href="https://github.com/AntonEbsen" target="_blank" rel="noopener" aria-label="GitHub">
                  <i class="fa-brands fa-github" aria-hidden="true"></i>
                </a>
              </span>
            </div>
          </div>

          <div class="cta-row">
            <a class="btn" href="/assets/Anton-CV.pdf" target="_blank" rel="noopener">
              <i class="fa-solid fa-download" aria-hidden="true"></i> Download CV (PDF)
            </a>
          </div>
        </div>

        <div class="card" id="skills">
          <h2>Kompetencer</h2>
          <h3>Faglige kompetencer</h3>
          <div class="focus-grid" aria-label="Faglige kompetencer">
            {skillsData.professional.map(skill => (
              <a class="focus-box" href={`/skills#${skill.id}`} title={skill.title}>
                <i class={skill.icon} aria-hidden="true"></i>
                <span>{skill.name}</span>
              </a>
            ))}
          </div>

          <hr class="divider">
          <h3>Programmeringssprog</h3>
          <div class="skills-grid" aria-label="Programmeringssprog">
            {skillsData.programming.map(skill => (
              <a class="skill-box" href={`/skills#${skill.id}`} title={skill.title}>
                <i class={skill.icon} aria-hidden="true"></i>
                <span>{skill.name}</span>
              </a>
            ))}
          </div>
        
          <hr class="divider">
        
          <h3>Fokusområder</h3>
          
          <div class="focus-grid" aria-label="Fokusområder">
            {skillsData.focus.map(skill => (
              <div class="focus-box">
                <i class={skill.icon} aria-hidden="true"></i>
                <span>{skill.name}</span>
              </div>
            ))}
          </div>

          <hr class="divider">

          <div class="lang-grid" aria-label="Sprog">
            {skillsData.languages.map(lang => (
              <div class="lang-box">
                {flagMap[lang.flag] && <Image src={flagMap[lang.flag]} alt={lang.name} class="lang-flag-sm" />}
                <div class="lang-text">
                  <div class="lang-name">{lang.name}</div>
                  <div class="lang-level">{lang.level}</div>
                </div>
              </div>
            ))}
          </div>
        </div>
      </aside>

      <div class="cv-main">
        <Section id="profile">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-accent mb-4">Profil</h2>
            <p class="mb-4 text-[15px] leading-relaxed opacity-90">
              Engageret økonomistuderende på kandidatuddannelsen ved Københavns Universitet med særligt fokus på
              makroøkonomi, økonometri og økonomiske modeller. Jeg har erfaring med programmering og databehandling
              gennem kurser i Python, tidsrækkemodeller (SAS) og CGE-modeller, samt undervisning i Excel og VBA.
            </p>
            <p class="text-[15px] leading-relaxed opacity-90">
              Jeg trives med at arbejde med tal og komplekse datasæt og med at omsætte analyser til resultater, der kan
              bruges som solidt grundlag for beslutninger.
            </p>
          </Card>
        </Section>

        <Section id="experience">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-accent mb-4">Erhvervserfaring</h2>
            <div class="space-y-0">
              {cv.experience.map(item => (
                <article class="item">
                  <div class="item-head">
                    <h3 class="text-[18px] font-bold m-0 mb-1">{item.title} · {item.organization}</h3>
                    <span class="text-[13px] text-dim">{item.location} · {item.period}</span>
                  </div>
                  <ul class="list-none p-0 m-0 mt-3 space-y-1">
                    {item.description.map(bullet => (
                      <li class="relative pl-3 before:content-['•'] before:absolute before:left-0 before:text-accent text-[14px] opacity-90">{bullet}</li>
                    ))}
                  </ul>
                </article>
              ))}
            </div>
          </Card>
        </Section>

        <Section id="education">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-accent mb-4">Uddannelse</h2>
            <div class="space-y-0">
              {cv.education.map(item => (
                <article class="item">
                  <div class="item-head">
                    <h3 class="text-[18px] font-bold m-0 mb-1">{item.degree} · {item.institution}</h3>
                    <span class="text-[13px] text-dim">{item.location} · {item.period}</span>
                  </div>
                  {item.description && <p class="text-[14px] text-dim mt-2 opacity-80">{item.description}</p>}
                </article>
              ))}
            </div>
          </Card>
        </Section>

        <Section id="projects">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-accent mb-4">Projekter</h2>
            <div class="space-y-0">
              {cv.projects.map(project => (
                <article class="item">
                  <div class="item-head">
                    <h3 class="text-[18px] font-bold m-0 mb-1">{project.title}</h3>
                    {project.meta && <span class="text-[13px] text-dim">{project.meta}</span>}
                  </div>
                  <p class="text-[14px] text-dim mt-2 opacity-80">
                    {project.description}
                  </p>
                </article>
              ))}
            </div>
          </Card>
        </Section>

        <Section id="volunteer">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-accent mb-4">Frivilligt</h2>
            <article class="item border-none pt-0">
              <div class="item-head">
                 <h3 class="text-[18px] font-bold m-0 mb-1">Forperson · Socialøkonomisk Samfund</h3>
                 <span class="text-[13px] text-dim">København K · 2024 – nu</span>
              </div>
              <p class="text-[14px] text-dim mt-2 opacity-80">Planlægning/koordinering af aktiviteter og arrangementer.</p>
            </article>
          </Card>
        </Section>

        <Section id="certifications">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-accent mb-4">Certificeringer</h2>
            <div class="cert-grid">
              <div class="cert">
                <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=a59d5c1b-8002-4e13-88a7-b7631f99fecd&" target="_blank" rel="noopener">
                  <Image src={matlabCert} alt="MATLAB Onramp certifikat" class="cert-img" />
                </a>
                <h3 class="text-sm font-bold mt-2 mb-1">
                  <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=a59d5c1b-8002-4e13-88a7-b7631f99fecd&" target="_blank" rel="noopener" class="no-underline text-white hover:text-accent">
                    MATLAB Onramp
                  </a>
                </h3>
                <p class="text-xs text-dim">MATLAB fundamentals og workflows.</p>
              </div>

              <div class="cert">
                <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=0f239f13-05d3-4633-9f7a-889fa81448f5&" target="_blank" rel="noopener">
                  <Image src={vectorCert} alt="Vectors & Matrices certifikat" class="cert-img" />
                </a>
                <h3 class="text-sm font-bold mt-2 mb-1">
                  <a href="https://matlabacademy.mathworks.com/progress/share/certificate.html?id=0f239f13-05d3-4633-9f7a-889fa81448f5&" target="_blank" rel="noopener" class="no-underline text-white hover:text-accent">
                    Calculations with Vectors...
                  </a>
                </h3>
                <p class="text-xs text-dim">Lineær algebra i praksis.</p>
              </div>
            </div>
          </Card>
        </Section>

        <Section id="contact">
          <Card variant="glass" class="p-6">
            <h2 class="text-xs font-bold uppercase tracking-wider text-accent mb-4">Kontakt</h2>
            <div class="contact-row">
              <Button href="mailto:anton.ebsen@gmail.com" variant="ghost">
                <i class="fa-solid fa-envelope mr-2" aria-hidden="true"></i>
                anton.ebsen@gmail.com
              </Button>
  
              <Button href="https://www.linkedin.com/in/antonebsen/" target="_blank" rel="noopener" aria-label="LinkedIn" variant="ghost">
                <i class="fa-brands fa-linkedin" aria-hidden="true"></i>
              </Button>
  
              <Button href="https://github.com/AntonEbsen" target="_blank" rel="noopener" aria-label="GitHub" variant="ghost">
                <i class="fa-brands fa-github" aria-hidden="true"></i>
              </Button>
            </div>
          </Card>
        </Section>
      </div>
    </section>
  </div>

  <script>
    (function () {
      const wrap = document.querySelector(".cv-wrap");
      const btn = document.getElementById("tocToggle");
      if (!wrap || !btn) return;

      function applyFromStorage() {
        const collapsed = localStorage.getItem("tocCollapsed") === "1";
        wrap.classList.toggle("is-toc-collapsed", collapsed);
        btn.setAttribute("aria-expanded", String(!collapsed));
      }

      btn.addEventListener("click", function () {
        const nowCollapsed = wrap.classList.toggle("is-toc-collapsed");
        btn.setAttribute("aria-expanded", String(!nowCollapsed));
        localStorage.setItem("tocCollapsed", nowCollapsed ? "1" : "0");
      });

      document.addEventListener("DOMContentLoaded", applyFromStorage);
    })();
  </script>
</Layout>
