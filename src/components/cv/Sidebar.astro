---
// Image imports removed to bypass Sharp on Windows
const myImageSrc = "/assets/img/billede-af-mig.jpg";

interface Props {
  data: any; // Skills data
  ui: any;   // UI labels
}

const { data, ui } = Astro.props;

// Fallback emoji map just in case images fail
const emojiMap: Record<string, string> = {
    'Dansk': 'ğŸ‡©ğŸ‡°',
    'Danish': 'ğŸ‡©ğŸ‡°',
    'DÃ¤nisch': 'ğŸ‡©ğŸ‡°',
    'Engelsk': 'ğŸ‡¬ğŸ‡§',
    'English': 'ğŸ‡¬ğŸ‡§',
    'Englisch': 'ğŸ‡¬ğŸ‡§',
    'Tysk': 'ğŸ‡©ğŸ‡ª',
    'German': 'ğŸ‡©ğŸ‡ª',
    'Deutsch': 'ğŸ‡©ğŸ‡ª'
};
---

<aside class="cv-side">
  <div class="card profile-card">
    <img src={myImageSrc} alt="Anton Meier Ebsen JÃ¸rgensen" class="profile-img" />

    <div class="profile-head">
      <h1>Anton Meier Ebsen JÃ¸rgensen</h1>
      <p class="subtitle">{ui.subtitle}</p>
    </div>

    <div class="meta">
      <div class="meta-row">
        <span class="meta-label">{ui.location}</span>
        <span class="meta-value">
          <a href="https://www.google.com/maps/search/?api=1&query=K%C3%B8benhavn" target="_blank" rel="noopener">{ui.city}</a>
        </span>
      </div>

      <div class="meta-row">
        <span class="meta-label">{ui.email}</span>
        <span class="meta-value"><a href="mailto:anton.ebsen@gmail.com">anton.ebsen@gmail.com</a></span>
      </div>

      <div class="meta-row">
        <span class="meta-label">{ui.phone}</span>
        <span class="meta-value"><a href="tel:+4525740131">+45 25 74 01 31</a></span>
      </div>

      <div class="meta-row">
        <span class="meta-label">{ui.profiles}</span>
        <span class="meta-value icon-links" aria-label={ui.profiles}>
          <a class="icon-link" href="https://www.linkedin.com/in/antonebsen/" target="_blank" rel="noopener" aria-label="LinkedIn">
            <i class="fa-brands fa-linkedin" aria-hidden="true"></i>
          </a>
          <a class="icon-link" href="https://github.com/AntonEbsen" target="_blank" rel="noopener" aria-label="GitHub">
            <i class="fa-brands fa-github" aria-hidden="true"></i>
          </a>
        </span>
      </div>
    </div>

    <div class="cta-row">
      <a class="btn" href="/assets/Anton-CV.pdf" target="_blank" rel="noopener">
        <i class="fa-solid fa-download" aria-hidden="true"></i> {ui.downloadCV}
      </a>
    </div>
  </div>

  <div class="card" id="skills">
    <h2>{ui.competencies}</h2>
    <h3>{ui.professional}</h3>
    <div class="focus-grid" aria-label={ui.professional}>
      {data.professional.map((skill: any) => (
        <a class="focus-box" href={`/skills#${skill.id}`} title={skill.title}>
          <i class={skill.icon} aria-hidden="true"></i>
          <span>{skill.name}</span>
        </a>
      ))}
    </div>

    <hr class="divider">
    <h3>{ui.programming}</h3>
    <div class="skills-grid" aria-label={ui.programming}>
      {data.programming.map((skill: any) => (
        <a class="skill-box" href={`/skills#${skill.id}`} title={skill.title}>
          <i class={skill.icon} aria-hidden="true"></i>
          <span>{skill.name}</span>
        </a>
      ))}
    </div>
  
    <hr class="divider">
  
    <h3>{ui.focus}</h3>
    
    <div class="focus-grid" aria-label={ui.focus}>
      {data.focus.map((skill: any) => (
        <div class="focus-box">
          <i class={skill.icon} aria-hidden="true"></i>
          <span>{skill.name}</span>
        </div>
      ))}
    </div>

    <hr class="divider">

    <div class="lang-grid" aria-label="Sprog">
      {data.languages.map((lang: any) => (
        <div class="lang-box">
          <div class="lang-flag-wrapper">
            {lang.flag && (
              <img 
                src={lang.flag} 
                alt={lang.name} 
                class="lang-flag-sm" 
                onerror="this.style.display='none'; this.nextElementSibling.style.display='block';" 
              />
            )}
            <span class="lang-emoji" style={lang.flag ? "display:none" : "display:block"}>
              {emojiMap[lang.name] || 'ğŸŒ'}
            </span>
          </div>
          <div class="lang-text">
            <div class="lang-name">{lang.name}</div>
            <div class="lang-level">{lang.level}</div>
          </div>
        </div>
      ))}
    </div>
  </div>
</aside>

